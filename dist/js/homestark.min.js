var hero=angular.module("superhero",["ui.bootstrap","ngRoute","homeStarkControllers"]);hero.config(["$controllerProvider",function(e){e.allowGlobals()}]),hero.config(["$routeProvider",function(e){e.when("/dash",{templateUrl:"/pages/windows/dashboard.ejs",controller:""}).when("/devices",{templateUrl:"/pages/windows/devices.ejs",controller:""}).when("/about",{templateUrl:"/pages/windows/about.ejs",controller:""}).otherwise({redirectTo:"/dash",controller:""})}]);
$(document).ready(function(){$(".sidebar-brand").click(function(e){e.preventDefault(),$("#wrapper").toggleClass("toggled"),$("#wrapper").toggleClass("untoggled")})});
var homeStarkController=angular.module("homeStarkControllers",["ui.bootstrap","ngRoute","gridster","ui.knob","uiSwitch"]);homeStarkController.controller("loginCtrl",["$scope",function(t){t.loadLogin=function(){t["class"]="loading"}}]),homeStarkController.controller("devicesCtrl",["$scope","$http","$timeout",function(t,e,o){t.rowCollection=[],t.displayedCollection=[],t.displayedCollection=[].concat(t.rowCollection),t.$on("$destroy",function(){o.cancel(a)});var a=function(){time=o(a,3e4),e({method:"GET",url:"/devices/list"}).then(function(e){for(var o=0;o<e.data.length;o++)e.data[o].active===!0?e.data[o].active="Ativo":e.data[o].active="Inativo";t.rowCollection=e.data},function(e){t.data=e.data||"Request failed",t.status=e.status,console.log(t.status)})};a()}]),homeStarkController.controller("dashCtrl",["$scope","$timeout","$http",function(t,e,o){function a(t){for(var e=[],o=0;o<t.length;o++)e.push({status:t[o].active,sizeX:1,sizeY:1,type:t[o].type,value:t[o].value,hw:t[o].hw_assoc});return e}function n(e){for(var o=0;o<e.length;o++)t.dash_sensors[o].status=e[o].status,t.dash_sensors[o].value=e[o].value}t.gridsterOpts={columns:6,pushing:!0,floating:!0,swapping:!0,width:"auto",colWidth:300,rowHeight:"match",margins:[10,10],outerMargin:!0,sparse:!1,isMobile:!1,mobileBreakPoint:600,mobileModeEnabled:!0,minColumns:1,minRows:2,maxRows:100,defaultSizeX:2,defaultSizeY:1,minSizeX:1,maxSizeX:null,minSizeY:1,maxSizeY:null,resizable:{enabled:!0,handles:["n","e","s","w","ne","se","sw","nw"],start:function(t,e,o){},resize:function(t,e,o){},stop:function(t,e,o){}},draggable:{enabled:!0}},t.dash_sensors=[],t.options_water={readOnly:!0,unit:"%",subText:{enabled:!0,text:"NÃ­vel",color:"gray"},trackWidth:30,barWidth:30,step:1,trackColor:"rgba(52,152,219,.1)",barColor:"rgba(52,152,219,.5)"},t.options_light={readOnly:!0,subText:{enabled:!0,text:"Lux",color:"gray"},bgColor:"#2C3E50",trackWidth:50,barWidth:30,max:2e3,barColor:"#FFAE1A",textColor:"#eee"},t.$on("$destroy",function(){e.cancel(s)}),t.$on("$routeChangeStart",function(t,o,a){e.cancel(s)}),t.toggleSwitch=function(e,a,n){var s=[];s.push({hw_assoc:a,value:e,type:n}),o({url:"/dash/setData",method:"POST",data:s,headers:{"Content-Type":"application/json"}}).then(function(t){console.log("Valor da chave enviada ao sensor!")},function(e){t.data=e.data||"Request failed",t.status=e.status,console.log(t.status)})};var s=function(){time=e(s,1e4),o({method:"GET",url:"/dash/list"}).then(function(e){e.data.length>t.dash_sensors.length?t.dash_sensors=a(e.data):n(e.data)},function(e){t.data=e.data||"Request failed",t.status=e.status,console.log(t.status)})};s()}]);